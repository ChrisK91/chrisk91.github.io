<!doctype html><html><head lang=en><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=stylesheet href=https://use.typekit.net/wcp3hcc.css><link href="/css/style.min.7fefe04f5558bed9f245a3975a2f09ecca5539b29f4a27c425f59babe1cffebd.css" rel=stylesheet><title>Bit depths, image data and histograms - ChrisK91.me</title></head><body class="bg-bluedark max-w-full lg:max-w-[80%] mx-auto"><div><div class="flex flex-col w-full px-4 py-4 mt-0 shadow-lg bg-bluemedium lg:mt-4 xl:mt-8"><div class="flex items-end justify-between font-sans text-6xl border-b md:text-9xl border-b-orange"><div><a href=/><span class="font-extrabold text-orange">ChrisK91</span><span class="font-light text-lightgreen">.me</span></a></div><div class="flex flex-col md:flex-row"><a href=https://twitter.com/ChrisK91 alt="Follow me on Twitter: @ChrisK91"><svg class="w-12 h-12 p-2 transition fill-lightyellow hover:fill-orange" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a><a href=https://med-mastodon.com/@chris alt="Follow me on Mastodon: @chris@med-mastodon.com"><svg class="w-12 h-12 p-2 transition fill-lightyellow hover:fill-orange" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg></a></div></div></div><ul class="flex flex-row w-full mt-4 text-2xl font-bold shadow-lg bg-lightgreen justify-center space-x-4"><li><a href=/post/ class="hover:text-bluemedium transition hover:underline text-bluedark"><span>blog</span></a></li><li><a href=/pages/about/ class="hover:text-bluemedium transition hover:underline text-bluedark"><span>about me</span></a></li><li><a href=/post/2018-09-19-Basic-CSS-Template-for-Anki/ class="hover:text-bluemedium transition hover:underline text-bluedark"><span>Anki CSS Template</span></a></li><li><a href=/tools/correlation-shift.html class="hover:text-bluemedium transition hover:underline text-bluedark"><span>Correlation Shift</span></a></li><li><a href=https://chrisk91.me/ekgApp/ class="hover:text-bluemedium transition hover:underline text-bluedark"><span>EKG visualizer</span></a></li></ul><aside class="sticky right-0 top-0 invisible xl:visible float-right mt-12 mr-2 2xl:mr-28 2xl:mt-24 bg-white/20 backdrop-blur pl-1.5"><h5 class="font-bold text-bluedark text-lg 2xl:text-4xl 2xl:font-extrabold pt-3 pb-2">Outline</h5><ul class=toc><li><a href=#top-of-article>Back to top</a></li></ul><nav id=TableOfContents><ul><li><a href=#bits-and-numbers>Bits and numbers</a></li><li><a href=#what-is-an-image>What is an image</a></li><li><a href=#real-examples-and-pitfalls>Real examples and pitfalls</a></li><li><a href=#histograms>Histograms</a></li><li><a href=#bit-depths-in-rgb>Bit depths in RGB</a></li><li><a href=#outlook>Outlook</a></li><li><a href=#image-sources>Image sources</a></li></ul></nav></aside><div class="p-2 md:pt-16 xl:pt-32 md:pl-8 xl:pl-32 2xl:pl-48 mt-4 mb-8 bg-white shadow-lg md:p-8 prose-p:font-serif prose-code:bg-bluemedium prose-code:text-white prose-code:px-1 prose-code:py-1 prose-code:rounded prose-code:select-all prose-code:font-mono prose-code:font-light prose-code:text-sm"><div class="prose lg:prose-xl" id=content><h1 class="mb-0 lg:mb-1" id=top-of-article>Bit depths, image data and histograms</h1><div class=not-prose><ul class="flex p-4 gap-x-2"><li><a class="bg-bluedark hover:bg-bluemedium transition hover:underline px-2 py-1 text-white decoration-orange font-medium tracking-wide text-xs hover:shadow-sm uppercase" href=/tags/ImageJ-Basics/ title="Browse tag: ImageJ Basics">#ImageJ Basics</a></li></ul></div><small class="text-bluemedium text-sm font-bold font-sans">Posted on October 9, 2016 |
Reading time 9 minutes</small><br><div class="not-prose flex w-full border border-lightgreen bg-lightyellow shadow-lg mt-2"><div class="bg-lightgreen rotate-180 [writing-mode:_vertical-lr] p-2 font-extrabold text-bluedark text-lg uppercase tracking-wide">key points</div><div class="p-2 keypoints place-self-center"><ul><li>You will understand how image information is represented as digital information</li><li>You will understand the differences between different bit depths</li><li>We will take a short introduction to histograms</li></ul></div></div><h2 id=bits-and-numbers>Bits and numbers</h2><p>Your computer actually knows only two states: 0 and 1. A bit is a <em>storage</em> that can either have the state 1 or 0 and is the smallest digital unit. Everything that is processed has to be represented by a chain of zeros and ones &mdash; a combination of bits. The actual information is received, when interpreting these bits in a certain way.</p><p>Let me give you an example: 562. Without context, you can&rsquo;t really do anything with 562. But if I would tell you, that this is an office number, the 562 suddenly has a meaning. It could also be the extension of my phone number. And suddenly 562 has a different meaning.</p><p>Similarly, the values <code>0100100001101001</code> could either be interpreted as <code>Hi</code>, if you treat it as text. But it could also mean the decimal number <code>18537</code>. We can see two things: a) we need to transform every information into combinations of 1 and 0, in order to process this information digitally; b) we need to define certain <em>rules</em> how to interpret data.</p><h2 id=what-is-an-image>What is an image</h2><p>A digital image is in its simplest form an arrangement of pixels. Every pixel stores information about the color at that place. Let&rsquo;s think of the image as table. The following table could for instance create the image below (the displayed image is scaled up). Try to figure out what the 0 and 1 represents. The X and Y are our coordinate system. The positions are zero based (the first number is zero) as often the case in computer science.</p><table><thead><tr><th style=text-align:center> </th><th style=text-align:center>x0</th><th style=text-align:center>x1</th></tr></thead><tbody><tr><td style=text-align:center><strong>y0</strong></td><td style=text-align:center>0</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center><strong>y1</strong></td><td style=text-align:center>1</td><td style=text-align:center>0</td></tr></tbody></table><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/bit_depth/pixels.png alt><p class="mt-2 text-base text-bluedark">What a boring picture. The original is two by two pixels. This version is obviously scaled up and shows four gigantic pixels.</p></div><p>As you can see, the 1 represents &ldquo;white&rdquo; and the 0 represents &ldquo;black&rdquo;. Since the information of every pixel is stored in <em>one single bit</em>, our simple image format has a <em>one bit depth</em>. Conversely, every pixel can only store two different combinations &mdash; black (0) or white (1). If we have two bits instead, we can store even more combinations:</p><table><thead><tr><th><strong>bits</strong></th><th><strong>combination</strong></th></tr></thead><tbody><tr><td>00</td><td>1</td></tr><tr><td>01</td><td>2</td></tr><tr><td>10</td><td>3</td></tr><tr><td>11</td><td>4</td></tr></tbody></table><p>So if we would define an image format with <em>two bit depth</em>, we could display now four different shades of gray. If we add a third bit, we can store eight different values, so we would have eight shades of gray. The number of combinations is equal to 2^n where n is the number of bits, in other words: the number of possible combinations grows exponentially.</p><p>Now let&rsquo;s try to think about bit depth from another standpoint. When we capture a picture and transform it to a digital image, we have to distribute the information across our states. Let&rsquo;s try to use the picture of a parrot and look at an 1 bit, 2 bit and 4 bit image of the same picture.</p><div class="not-prose grid grid-cols-2 gap-2 md:gap-4 xl:gap-6"><div class="flex flex-col p-2 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20"><img src=/images/bit_depth/parrot_RGB.jpg alt><p class="mt-2 text-base text-bluedark">Original</p></div><div class="flex flex-col p-2 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20"><img src=/images/bit_depth/parrot_1.png alt><p class="mt-2 text-base text-bluedark">1 bit image</p></div><div class="flex flex-col p-2 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20"><img src=/images/bit_depth/parrot_2.png alt><p class="mt-2 text-base text-bluedark">2 bit image</p></div><div class="flex flex-col p-2 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20"><img src=/images/bit_depth/parrot_4.png alt><p class="mt-2 text-base text-bluedark">4 bit image</p></div></div><p>The image becomes more detailed, the greater the bit depth. Below, you can find an animation where a continuous gradient is drawn with an increasing number of combinations. They don&rsquo;t always represent a real bit depth, but they highlight one thing really well: after a certain number of bit depth, the gain from more combinations is diminishing. The human eye can only distinguish so many shades, after a certain number, new shades won&rsquo;t really matter.</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><video loop autoplay src=/images/bit_depth/web.mp4 alt><p class="mt-2 text-base text-bluedark">Gradual increase in bit-depth results in more shades of gray that can be displayed</p></div><h2 id=real-examples-and-pitfalls>Real examples and pitfalls</h2><p>So far we at somewhat artificial samples of grayscale images. How does bit depth affect us in real life. Let&rsquo;s look at fluorescent microscopy and western blots. In both cases, we measure a signal at a position. We transform this signal into image data. Let&rsquo;s imagine we have a western blot with four bands. Each has a distinct intensity, and we want to transform these intensities into digital data. How does bit depth affect our signal?</p><table><thead><tr><th> </th><th>real intensity</th><th>1 bit</th><th>2 bit</th></tr></thead><tbody><tr><td>Band A</td><td>100%</td><td>1</td><td>11</td></tr><tr><td>Band B</td><td>75%</td><td>1</td><td>10</td></tr><tr><td>Band C</td><td>50%</td><td>0</td><td>01</td></tr><tr><td>Band D</td><td>25%</td><td>0</td><td>00</td></tr></tbody></table><p>As you can see, a bit depth of 1 bit is not sufficient to encode the information of our source in detail. If we were to analyze the 2 bit image, we would conclude, that protein A and B have the same intensity. C and D &mdash; we would conclude &ndash; might be lost, while they are still present in reality. So we can also think of bit depth as granularity. The more bits available &mdash; the finer our discrimination between signals. And while a high bit depth might not matter to the human eye, the information conveyed by more bits might play an important role in your analysis.</p><p>A similar case can be made in fluorescent microscopy. If you transform your source signal into an image of high bit depth, you can resolve a higher range of intensities later on. If your bit depth is too low, you might not be able to detect real differences between signals.</p><p>Also, your camera or microscope has to fit your data into a certain range. If your exposure is too high, the captured data will be treated as the &ldquo;highest&rdquo; combination. If we were to capture the western blot above for too long, all the bands would receive the value 1 (in 1 bit) and 11 (in 2 bit). Since our signal was higher than the possible range, it was clipped to the highest possible value (overexposed). If we were capturing the blot too short, we would end up with zeros: not enough signal would hit the sensor of our camera, and it would not detect a signal.</p><h2 id=histograms>Histograms</h2><p>We can look at the distribution of intensities via histogram. In ImageJ, you can find this tool via <em>Analyze → Histogram</em> or <span class="font-sans bg-bluemedium px-2 py-1.5 border border-bluedark text-xs font-semibold rounded-md text-white whitespace-nowrap">Ctrl + H</span>. As in statistics, you will get a diagram with the intensity on the x-, and the frequency on the y-axis. In ImageJ you can also hover over the data to see the exact numbers. Below, you can find the image of a taxi in New York. I&rsquo;ve increased and decreased the brightness artificially, and added the histograms below. Also pay attention to the <em>mode</em> (the most frequent value).</p><div class="not-prose grid grid-cols-3 gap-2 md:gap-4 xl:gap-6"><div class="flex flex-col p-2 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20"><img src=/images/bit_depth/taxi_bw.png alt><p class="mt-2 text-base text-bluedark">Original</p></div><div class="flex flex-col p-2 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20"><img src=/images/bit_depth/taxi_bw_bright.png alt><p class="mt-2 text-base text-bluedark">Brighter</p></div><div class="flex flex-col p-2 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20"><img src=/images/bit_depth/taxi_bw_dark.png alt><p class="mt-2 text-base text-bluedark">Darker</p></div><div class="flex flex-col p-2 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20"><img src=/images/bit_depth/hist_taxi_bw.png alt><p class="mt-2 text-base text-bluedark">Original (Histogram)</p></div><div class="flex flex-col p-2 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20"><img src=/images/bit_depth/hist_taxi_bw_bright.png alt><p class="mt-2 text-base text-bluedark">Brigther (Histogram)</p></div><div class="flex flex-col p-2 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20"><img src=/images/bit_depth/hist_taxi_bw_dark.png alt><p class="mt-2 text-base text-bluedark">Darker (Histogram)</p></div></div><p>In the original histogram, you can see that the intensities are well spread out. There are some pixels with an intensity of zero (maybe the mirror of the taxi). You can also see a bright peak, probably due to the sky and buildings.</p><p>In the brighter (simulate overexposed) image, the modal is at intensity 255 (the maximum value for an 8 bit image). All the values above that are clipped to 255 since an 8 bit image cannot represent higher numbers. Details in areas that originally were bright are lost (e.g. the clouds in the sky).</p><p>In the darker (simulated underexposed) image, there is an abundant number of pixels with intensity 0. The bright intensities are missing and information in the dark areas is lost (e.g. the windows on the dark gray building).</p><p>When you work with images, you can check the histogram to evaluate the exposure. If the highest or lowest intensities have a large frequency, it might indicate inappropriate exposure. This can cause your analysis to lose precision or mask differences across brighter (or darker) areas. But if you are interested in a certain range (with a fine resolution), you might trade the loss of higher and lower intensities for that. In this case, accumulations of very high and very low pixels can be intended.</p><h2 id=bit-depths-in-rgb>Bit depths in RGB</h2><p>Now, after working with gray for a while, I want to make some remarks about color. When transforming color into digital data, we use a <a href=https://chrisk91.me/post/2016-09-28-An-introduction-to-color/>model</a> to split color information into different intensities. In other words: we save a color as a mixture of red, green and blue. Each of these channels has a designated number of bits. For instance a 24bit RGB image has three channels made up of 8bit depth each. The principles above (e.g. clipping and resolution) apply to each channel individually. As such, each intensity has to be assigned to a &ldquo;combination&rdquo; of bits. I want to introduce one last artifact caused by too low bit depth: banding. Notice the harsh steps in the 8 bit parrots. The steps between intensities are still so large, that the human eye can see them easily. Therefore, we can see colored bands.</p><div class="not-prose grid grid-cols-2 gap-2 md:gap-4 xl:gap-6"><div class="flex flex-col p-2 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20"><img src=/images/bit_depth/parrot_RGB.jpg alt><p class="mt-2 text-base text-bluedark">Original</p></div><div class="flex flex-col p-2 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20"><img src=/images/bit_depth/parrot_8.png alt><p class="mt-2 text-base text-bluedark">8 bit RGB image with color banding</p></div></div><h2 id=outlook>Outlook</h2><p>We had a small look in the inner workings of digital images. We saw, how a continuous intensity has to be transformed into a &ldquo;stepwise&rdquo; format, in order for the computer to process it. So, what bit depth is the best? Let&rsquo;s sum up what a higher bit depth allows us to do: we can either a) represent finer steps between intensities (e.g. we could go from 0 to 1 in 256 steps) or b) save a higher range of data (e.g. the range between 0 and 256 in steps of 1). With 16 bit we would have 65.536 steps available. But can you think of an example, where a 1 bit image would be suited best? If you&rsquo;ve worked through <a href=https://chrisk91.me/post/2016-10-05-Hands-on-Color-models-and-ImageJ/>the color model example</a>, you might recall that we created a threshold &mdash; a categorization that assigns every pixel one of two categories. If we were to save this threshold as an image, a 1 bit file would be fine (since it has exactly two values).</p><p>In most cases however, the bit depth is given by the software you&rsquo;re working with. Unfortunately you can&rsquo;t &ldquo;recover&rdquo; signal that fell victim to a too low bit depth. As such, it is important to know the limitations of a too low bit depth and which artifacts can indicate, that the format is not appropriate. With that in mind, some knowledge about bit depth is a nice to have. It can sometimes be the case, that a piece of software only works with certain image formats (including a certain bit depth), and now you can judge about the potential issues of conversion.</p><h2 id=image-sources>Image sources</h2><p>The original images can be found via the links below:</p><ul><li>Parrot by Ricardo Cancho Niemietz via <a href=https://en.wikipedia.org/wiki/File:RGB_24bits_palette_sample_image.jpg>Wikimedia Commons</a></li><li>Taxis in new York by Lensicle via <a href=https://flic.kr/p/qmKdqv>Flickr</a>, licensed as CC-BY 2</li></ul></div></div><div class="p-2 mt-4 mb-8 bg-white shadow-lg md:p-8"><div class="prose lg:prose-xl mb-2" id=content><h1>Comments</h1></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//http-chrisk91-me.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-30MHG4HNXJ"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-30MHG4HNXJ",{anonymize_ip:!1})}</script></body></html>