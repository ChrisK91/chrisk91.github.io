<!doctype html><html><head lang=en><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=stylesheet href=https://use.typekit.net/wcp3hcc.css><link href="/css/style.min.7fefe04f5558bed9f245a3975a2f09ecca5539b29f4a27c425f59babe1cffebd.css" rel=stylesheet><title>Building Anki 2.1 on Windows 10 - ChrisK91.me</title></head><body class="bg-bluedark max-w-full lg:max-w-[80%] mx-auto"><div><div class="flex flex-col w-full px-4 py-4 mt-0 shadow-lg bg-bluemedium lg:mt-4 xl:mt-8"><div class="flex items-end justify-between font-sans text-6xl border-b md:text-9xl border-b-orange"><div><a href=/><span class="font-extrabold text-orange">ChrisK91</span><span class="font-light text-lightgreen">.me</span></a></div><div class="flex flex-col md:flex-row"><a href=https://twitter.com/ChrisK91 alt="Follow me on Twitter: @ChrisK91"><svg class="w-12 h-12 p-2 transition fill-lightyellow hover:fill-orange" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a><a href=https://med-mastodon.com/@chris alt="Follow me on Mastodon: @chris@med-mastodon.com"><svg class="w-12 h-12 p-2 transition fill-lightyellow hover:fill-orange" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg></a></div></div></div><ul class="flex flex-row w-full mt-4 text-2xl font-bold shadow-lg bg-lightgreen justify-center space-x-4"><li><a href=/post/ class="hover:text-bluemedium transition hover:underline text-bluedark"><span>blog</span></a></li><li><a href=/pages/about/ class="hover:text-bluemedium transition hover:underline text-bluedark"><span>about me</span></a></li><li><a href=/post/2018-09-19-Basic-CSS-Template-for-Anki/ class="hover:text-bluemedium transition hover:underline text-bluedark"><span>Anki CSS Template</span></a></li><li><a href=/tools/correlation-shift.html class="hover:text-bluemedium transition hover:underline text-bluedark"><span>Correlation Shift</span></a></li><li><a href=https://chrisk91.me/ekgApp/ class="hover:text-bluemedium transition hover:underline text-bluedark"><span>EKG visualizer</span></a></li></ul><aside class="sticky right-0 top-0 invisible xl:visible float-right mt-12 mr-2 2xl:mr-28 2xl:mt-24 bg-white/20 backdrop-blur pl-1.5"><h5 class="font-bold text-bluedark text-lg 2xl:text-4xl 2xl:font-extrabold pt-3 pb-2">Outline</h5><ul class=toc><li><a href=#top-of-article>Back to top</a></li></ul><nav id=TableOfContents><ul><li><a href=#aim>Aim</a></li><li><a href=#prerequisites>Prerequisites</a><ul><li><a href=#setting-up-python-36>Setting up Python 3.6</a></li><li><a href=#cloning-the-repository>Cloning the repository</a></li><li><a href=#installing-wsl>Installing WSL</a></li><li><a href=#continuing-in-vscode>Continuing in VSCode</a></li></ul></li><li><a href=#other-packages>Other packages</a></li><li><a href=#starting-anki-21-from-vscode>Starting Anki 2.1 from VSCode</a></li><li><a href=#final-remarks>Final remarks</a></li></ul></nav></aside><div class="p-2 md:pt-16 xl:pt-32 md:pl-8 xl:pl-32 2xl:pl-48 mt-4 mb-8 bg-white shadow-lg md:p-8 prose-p:font-serif prose-code:bg-bluemedium prose-code:text-white prose-code:px-1 prose-code:py-1 prose-code:rounded prose-code:select-all prose-code:font-mono prose-code:font-light prose-code:text-sm"><div class="prose lg:prose-xl" id=content><h1 class="mb-0 lg:mb-1" id=top-of-article>Building Anki 2.1 on Windows 10</h1><div class=not-prose><ul class="flex p-4 gap-x-2"><li><a class="bg-bluedark hover:bg-bluemedium transition hover:underline px-2 py-1 text-white decoration-orange font-medium tracking-wide text-xs hover:shadow-sm uppercase" href=/tags/Addon-Development/ title="Browse tag: Addon Development">#Addon Development</a></li><li><a class="bg-bluedark hover:bg-bluemedium transition hover:underline px-2 py-1 text-white decoration-orange font-medium tracking-wide text-xs hover:shadow-sm uppercase" href=/tags/Anki/ title="Browse tag: Anki">#Anki</a></li></ul></div><small class="text-bluemedium text-sm font-bold font-sans">Posted on April 18, 2018 |
Reading time 6 minutes</small><br><div class="not-prose flex w-full border border-lightgreen bg-lightyellow shadow-lg mt-2"><div class="bg-lightgreen rotate-180 [writing-mode:_vertical-lr] p-2 font-extrabold text-bluedark text-lg uppercase tracking-wide">key points</div><div class="p-2 keypoints place-self-center"><ul><li>I will highlight how I set up my system to build Anki 2.1 on Windows 10</li><li>These steps will guide you to set up a similar environment on your machine</li></ul></div></div><h2 id=aim>Aim</h2><p>I wanted to have a set-up, where I can easily run Anki 2.1 from the cloned source code. For windows, there are several workarounds for compatibility issues with the current tool chain. Most of them due to the fact, that some build scripts are written in bash.</p><p>Instead of using workarounds, I wanted a system leveraging the <a href=https://docs.microsoft.com/en-us/windows/wsl/install-win10>Windows Subsystem for Linux</a>, which offers high compatibility with a wide range of Linux tools.</p><h2 id=prerequisites>Prerequisites</h2><p>You will need an up-to-date version of Windows 10 Professional (or Windows 11) to reproduce this setup. This process will take between 30 and 45 minutes, depending on your hardware and internet connection. Around of 400 megabytes will be used for libraries and developmental tools.</p><h3 id=setting-up-python-36>Setting up Python 3.6</h3><p>As outlined in my <a href=https://chrisk91.me/post/2018-02-13-Setting-up-VSCode-for-Anki-addon-development/>first post about addons</a>, I will use the <a href=https://conda.io/docs/>Conda package and environment manager</a> which comes with the scientific <a href=https://www.anaconda.com/download/>Anaconda distribution</a>. A more lightweight version is <a href=https://www.anaconda.com/download/>Miniconda</a>, which excludes the scientific libraries, that are included with Anaconda.</p><p>I use a separate environment of Python 3.6 for Anki 2.1. This is created via <code>conda create --name anki21env python=3.6</code>. The command will prompt you to confirm the installed packages. When finished, the console will also tell you how to activate this environment:</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#616e87;font-style:italic># To activate this environment, use:</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># &gt; activate anki21env</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># To deactivate an active environment, use:</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># &gt; deactivate</span></span></span></code></pre></td></tr></table></div></div></div></div><p>We can confirm the version in this environment via (Text after <code>></code> denotes input):</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&gt;activate anki21env
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1>(</span>anki21env<span style=color:#81a1c1>)</span>&gt;python --version
</span></span><span style=display:flex><span>Python 3.6.5 :: Anaconda, Inc.</span></span></code></pre></td></tr></table></div></div></div><div class="not-prose w-full text-white py-1 px-2">> denotes input</div></div><h3 id=cloning-the-repository>Cloning the repository</h3><p>Using the Git Shell that comes with <a href=https://desktop.github.com/>GitHub Desktop</a>, I clone the current developmental build into a new directory. The following commands are run inside Git Shell (you can use Tab to autocomplete directories and commands):</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&gt; mkdir Anki21Dev
</span></span><span style=display:flex><span>&gt; <span style=color:#81a1c1>cd</span> .<span style=color:#ebcb8b>\A</span>nki21Dev<span style=color:#ebcb8b>\
</span></span></span><span style=display:flex><span><span style=color:#ebcb8b></span>&gt; git clone https://github.com/dae/anki.git</span></span></code></pre></td></tr></table></div></div></div><div class="not-prose w-full text-white py-1 px-2">> denotes input</div></div><p>If you come across issues, you can check out the <code>README.development</code> inside the cloned files. This file lists the requirements for running Anki (i.e. required packages)</p><h3 id=installing-wsl>Installing WSL</h3><p>WSL is the Windows Subsystem for Linux. Start PowerShell as administrator and run <code>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</code>. After that, you need to restart your PC.</p><p>Next, we want to set up a Linux distribution. I tend to go with Ubuntu, which you can get via <a href=https://www.microsoft.com/store/p/ubuntu/9nblggh4msv6>the Windows Store</a>. Go ahead and install it. Once the setup is done, start Ubuntu via the Start button or via the start menu. After a few minutes of installation, you will be prompted to set up a user account in Ubuntu. This doesn&rsquo;t need to match your Windows name.</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki21_win10/ubuntu_install.png alt><p class="mt-2 text-base text-bluedark">The installer prompts you to set up a user for the Ubuntu system</p></div><h3 id=continuing-in-vscode>Continuing in VSCode</h3><p>I will continue using the integrated terminal in VSCode, because when building add-ons, you will most likely be in VSCode (or another editor of your choice). You can open the integrated terminal via <span class="font-sans bg-bluemedium px-2 py-1.5 border border-bluedark text-xs font-semibold rounded-md text-white whitespace-nowrap">Ctrl + Shift + P</span> and then via the <code>view terminal</code> command.</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki21_win10/vscode_open_terminal.png alt><p class="mt-2 text-base text-bluedark">You can open the integrated terminal in VSCode either via the command palette or via the View fly out.</p></div><p>Next, need to generate some QT files needed by Anki. The build scripts to generate these files are bash scripts, so we need to enter the Ubuntu bash by using the <code>bash</code> command.</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki21_win10/bash.png alt><p class="mt-2 text-base text-bluedark"></p></div><p>Next, we install a package into our Ubuntu subsystem. First, we update the package list via <code>sudo apt-get update</code>, and then we install the Python Qt5 DevTools via <code>sudo apt-get install pyqt5-dev-tools</code>. This will also install packages required by the development tools, and take around 200Â MB. This process has to be done only once.</p><p>Now we will run the <em>build_ui.sh</em> script inside the project root (the folder containing the <em>anki</em>, <em>aqt</em>, <em>designer</em> subfolders and all the other stuff). But this will most likely result in an error (this time input after <code>$</code> denotes commands, since we are on a linux shell):</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ ./tools/build_ui.sh
</span></span><span style=display:flex><span>./tools/build_ui.sh: line 6: <span style=color:#a3be8c>$&#39;\r&#39;</span>: <span style=color:#81a1c1>command</span> not found
</span></span><span style=display:flex><span>./tools/build_ui.sh: line 23: syntax error near unexpected token <span style=color:#a3be8c>`</span><span style=color:#a3be8c>$&#39;do\r&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#a3be8c>&#39;</span>/tools/build_ui.sh: line 23: <span style=color:#a3be8c>`</span><span style=color:#81a1c1;font-weight:700>do</span></span></span></code></pre></td></tr></table></div></div></div><div class="not-prose w-full text-white py-1 px-2">$ denotes input</div></div><p>Culprit are Windows line endings, which differ from Linux. Bash has issues with the escaped characters. We can either convert these line endings manually, or use the <code>dos2unix</code> command, which is installed via <code>sudo apt-get install dos2unix</code>.</p><p>We can now preprocess the file with <code>dos2unix</code> and run the converted output into bash:</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">43
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ bash &lt;<span style=color:#81a1c1>(</span>dos2unix &lt; ./tools/build_ui.sh<span style=color:#81a1c1>)</span>
</span></span><span style=display:flex><span>Generating forms..
</span></span><span style=display:flex><span> * aqt/forms/about.py
</span></span><span style=display:flex><span> * aqt/forms/addcards.py
</span></span><span style=display:flex><span> * aqt/forms/addfield.py
</span></span><span style=display:flex><span> * aqt/forms/addmodel.py
</span></span><span style=display:flex><span> * aqt/forms/addonconf.py
</span></span><span style=display:flex><span> * aqt/forms/addons.py
</span></span><span style=display:flex><span> * aqt/forms/browserdisp.py
</span></span><span style=display:flex><span> * aqt/forms/browseropts.py
</span></span><span style=display:flex><span> * aqt/forms/browser.py
</span></span><span style=display:flex><span> * aqt/forms/changemap.py
</span></span><span style=display:flex><span> * aqt/forms/changemodel.py
</span></span><span style=display:flex><span> * aqt/forms/clayout_top.py
</span></span><span style=display:flex><span> * aqt/forms/customstudy.py
</span></span><span style=display:flex><span> * aqt/forms/dconf.py
</span></span><span style=display:flex><span> * aqt/forms/debug.py
</span></span><span style=display:flex><span> * aqt/forms/dyndconf.py
</span></span><span style=display:flex><span> * aqt/forms/editaddon.py
</span></span><span style=display:flex><span> * aqt/forms/editcurrent.py
</span></span><span style=display:flex><span> * aqt/forms/edithtml.py
</span></span><span style=display:flex><span> * aqt/forms/exporting.py
</span></span><span style=display:flex><span> * aqt/forms/fields.py
</span></span><span style=display:flex><span> * aqt/forms/finddupes.py
</span></span><span style=display:flex><span> * aqt/forms/findreplace.py
</span></span><span style=display:flex><span> * aqt/forms/getaddons.py
</span></span><span style=display:flex><span> * aqt/forms/importing.py
</span></span><span style=display:flex><span> * aqt/forms/main.py
</span></span><span style=display:flex><span> * aqt/forms/modelopts.py
</span></span><span style=display:flex><span> * aqt/forms/models.py
</span></span><span style=display:flex><span> * aqt/forms/preferences.py
</span></span><span style=display:flex><span> * aqt/forms/preview.py
</span></span><span style=display:flex><span> * aqt/forms/profiles.py
</span></span><span style=display:flex><span> * aqt/forms/progress.py
</span></span><span style=display:flex><span> * aqt/forms/reposition.py
</span></span><span style=display:flex><span> * aqt/forms/reschedule.py
</span></span><span style=display:flex><span> * aqt/forms/setgroup.py
</span></span><span style=display:flex><span> * aqt/forms/setlang.py
</span></span><span style=display:flex><span> * aqt/forms/stats.py
</span></span><span style=display:flex><span> * aqt/forms/studydeck.py
</span></span><span style=display:flex><span> * aqt/forms/taglimit.py
</span></span><span style=display:flex><span> * aqt/forms/template.py
</span></span><span style=display:flex><span>Building resources..</span></span></code></pre></td></tr></table></div></div></div><div class="not-prose w-full text-white py-1 px-2">$ denotes input</div></div><blockquote><p><strong>You need to repeat this step every time you update your code files!</strong></p></blockquote><p>Now it&rsquo;s time to exit the Linux shell by using <code>exit</code>.</p><h2 id=other-packages>Other packages</h2><p>We need to install further packages. Therefore, we need to activate our environment again. This can be cumbersome with PowerShell, so we will just use the normal command prompt for that. You can open it (in VSCode) via <span class="font-sans bg-bluemedium px-2 py-1.5 border border-bluedark text-xs font-semibold rounded-md text-white whitespace-nowrap">Ctrl + Shift + C</span>.</p><p>Run <code>activate anki21env</code> to select the environment.</p><p>Now we want to satisfy some dependencies. We start with <code>pip install mpv</code> and <code>pip install pywin32</code>. Next we install PyQt5. We can&rsquo;t use Conda, since the version there doesn&rsquo;t support <code>QtWebEngine</code>. So let&rsquo;s use <code>pip install pyqt5==5.9</code> instead (we need to install 5.9 since Anki won run with the most recent version at the time of writing).</p><p>Finally, install the packages inside <em>requirements.txt</em> using <code>pip install -r requirements.txt</code>.</p><p>These are the bare minimums to get Anki started.</p><h2 id=starting-anki-21-from-vscode>Starting Anki 2.1 from VSCode</h2><p>Finally, we need to set up a launch configuration. Hit Ctrl + Shift + P and enter <code>launch.json</code> to go to your launch.json file. I created a configuration similar to the one below:</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1>&#34;name&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;Python: Anki 2.1&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1>&#34;type&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;python&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1>&#34;request&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;launch&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1>&#34;stopOnEntry&#34;</span><span style=color:#eceff4>:</span> <span style=color:#81a1c1;font-weight:700>false</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1>&#34;program&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;${workspaceFolder}/runanki&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1>&#34;console&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;integratedTerminal&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></td></tr></table></div></div></div><div class="not-prose w-full text-white py-1 px-2">launch.json</div></div><p>Now you can launch Anki 2.1 using the integrated debug command, after selecting the environment in VSCode in the bottom left corner (see the arrow):</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki21_win10/select_env.png alt><p class="mt-2 text-base text-bluedark">Select the environment by clicking this text.</p></div><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki21_win10/final.png alt><p class="mt-2 text-base text-bluedark">After all that, we can debug Anki and every extension we write</p></div><h2 id=final-remarks>Final remarks</h2><p>This concludes the initial setup. There are still some steps to take, when you want to work with media and audio, which I haven&rsquo;t needed so far. This outline is intended to get a basic setup going, so I can debug extension written for Anki 2.1 using VSCode, which it does. The WSL allows for elegant use of the existing tool chain, and the integrated package managers make updating dependencies easier than manual installations. If you have other solutions or ideas to improve this outline, let me know in the comments below!</p></div></div><div class="p-2 mt-4 mb-8 bg-white shadow-lg md:p-8"><div class="prose lg:prose-xl mb-2" id=content><h1>Comments</h1></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//http-chrisk91-me.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-30MHG4HNXJ"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-30MHG4HNXJ",{anonymize_ip:!1})}</script></body></html>