<!doctype html><html><head lang=en><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=stylesheet href=https://use.typekit.net/wcp3hcc.css><link href="/css/style.min.7fefe04f5558bed9f245a3975a2f09ecca5539b29f4a27c425f59babe1cffebd.css" rel=stylesheet><title>Setting up VSCode for Anki add on development. - ChrisK91.me</title></head><body class="bg-bluedark max-w-full lg:max-w-[80%] mx-auto"><div><div class="flex flex-col w-full px-4 py-4 mt-0 shadow-lg bg-bluemedium lg:mt-4 xl:mt-8"><div class="flex items-end justify-between font-sans text-6xl border-b md:text-9xl border-b-orange"><div><a href=/><span class="font-extrabold text-orange">ChrisK91</span><span class="font-light text-lightgreen">.me</span></a></div><div class="flex flex-col md:flex-row"><a href=https://twitter.com/ChrisK91 alt="Follow me on Twitter: @ChrisK91"><svg class="w-12 h-12 p-2 transition fill-lightyellow hover:fill-orange" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a><a href=https://med-mastodon.com/@chris alt="Follow me on Mastodon: @chris@med-mastodon.com"><svg class="w-12 h-12 p-2 transition fill-lightyellow hover:fill-orange" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg></a></div></div></div><ul class="flex flex-row w-full mt-4 text-2xl font-bold shadow-lg bg-lightgreen justify-center space-x-4"><li><a href=/post/ class="hover:text-bluemedium transition hover:underline text-bluedark"><span>blog</span></a></li><li><a href=/pages/about/ class="hover:text-bluemedium transition hover:underline text-bluedark"><span>about me</span></a></li><li><a href=/post/2018-09-19-Basic-CSS-Template-for-Anki/ class="hover:text-bluemedium transition hover:underline text-bluedark"><span>Anki CSS Template</span></a></li><li><a href=/tools/correlation-shift.html class="hover:text-bluemedium transition hover:underline text-bluedark"><span>Correlation Shift</span></a></li><li><a href=https://chrisk91.me/ekgApp/ class="hover:text-bluemedium transition hover:underline text-bluedark"><span>EKG visualizer</span></a></li></ul><aside class="sticky right-0 top-0 invisible xl:visible float-right mt-12 mr-2 2xl:mr-28 2xl:mt-24 bg-white/20 backdrop-blur pl-1.5"><h5 class="font-bold text-bluedark text-lg 2xl:text-4xl 2xl:font-extrabold pt-3 pb-2">Outline</h5><ul class=toc><li><a href=#top-of-article>Back to top</a></li></ul><nav id=TableOfContents><ul><li><a href=#prerequisites>Prerequisites</a><ul><li><a href=#python-27>Python 2.7</a></li></ul></li><li><a href=#setting-up-a-project-folder>Setting up a project folder</a></li><li><a href=#configuring-the-run-action>Configuring the &ldquo;run&rdquo; action</a></li><li><a href=#autocomplete>Autocomplete</a></li><li><a href=#linting>Linting</a></li><li><a href=#gitignore>.gitignore</a></li><li><a href=#final-remarks>Final remarks</a></li></ul></nav></aside><div class="p-2 md:pt-16 xl:pt-32 md:pl-8 xl:pl-32 2xl:pl-48 mt-4 mb-8 bg-white shadow-lg md:p-8 prose-p:font-serif prose-code:bg-bluemedium prose-code:text-white prose-code:px-1 prose-code:py-1 prose-code:rounded prose-code:select-all prose-code:font-mono prose-code:font-light prose-code:text-sm"><div class="prose lg:prose-xl" id=content><h1 class="mb-0 lg:mb-1" id=top-of-article>Setting up VSCode for Anki add on development.</h1><div class=not-prose><ul class="flex p-4 gap-x-2"><li><a class="bg-bluedark hover:bg-bluemedium transition hover:underline px-2 py-1 text-white decoration-orange font-medium tracking-wide text-xs hover:shadow-sm uppercase" href=/tags/Addon-Development/ title="Browse tag: Addon Development">#Addon Development</a></li><li><a class="bg-bluedark hover:bg-bluemedium transition hover:underline px-2 py-1 text-white decoration-orange font-medium tracking-wide text-xs hover:shadow-sm uppercase" href=/tags/Anki/ title="Browse tag: Anki">#Anki</a></li></ul></div><small class="text-bluemedium text-sm font-bold font-sans">Posted on February 13, 2018 |
Reading time 7 minutes</small><br><div class="not-prose flex w-full border border-lightgreen bg-lightyellow shadow-lg mt-2"><div class="bg-lightgreen rotate-180 [writing-mode:_vertical-lr] p-2 font-extrabold text-bluedark text-lg uppercase tracking-wide">key points</div><div class="p-2 keypoints place-self-center"><ul><li>I will highlight configuration steps to set up Visual Studio Code for Anki development</li></ul></div></div><p>Recently, I wrote my very first <a href=https://ankiweb.net/shared/info/181219369>add on for Anki</a>, using Visual Studio Code with the official <a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Python add-on for VSCode</a>. With Visual Studio Code, you can easily write and debug code and add-ons, you will write in the future.</p><h2 id=prerequisites>Prerequisites</h2><p>To get full debugging support, we need to get the Anki source. It is available at the <a href=https://apps.ankiweb.net/>download section of the website</a> under <em>Linux/BSD</em> → <em>Other Options</em> → <em>Source.tgz</em>. At the time of writing, the version was <em>2.0.47</em>. Download the source and extract it to a location of your liking.</p><h3 id=python-27>Python 2.7</h3><blockquote><p>The section below will describe how I set up my Python 2.7 environment. If you have Python 2.7 already set up, you can skip ahead. Just make sure, you can run anki from source before proceeding, by using the <code>anki.bat</code> file in the source directory</p></blockquote><p>Now, we need to get Python 2.7 running. On my machine, I have Anaconda installed, so I will create a new environment for Python 2.7, using the <a href=https://conda.io/docs/>conda package and environment manager</a> which comes with the scientific <a href=https://www.anaconda.com/download/>Anaconda distribution</a>. If you&rsquo;re interested in a more lightweight setup, you can also try out <a href=https://www.anaconda.com/download/>Miniconda</a>, which excludes the scientific libraries, that come with Anaconda.</p><p>I set up the environment with <code>conda create --name python2 python=2.7</code>. This will create a bare-bones Python 2.7 environment without any additional stuff in it. Once successful, this command will also state how to activate the new environment:</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#616e87;font-style:italic># To activate this environment, use:</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># &gt; activate python2</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># To deactivate this environment, use:</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># &gt; deactivate python2</span></span></span></code></pre></td></tr></table></div></div></div></div><p>We can check our setup on the command line via (<code>></code> denotes input):</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&gt;activate python2
</span></span><span style=display:flex><span><span style=color:#81a1c1>(</span>python2<span style=color:#81a1c1>)</span>&gt;python --version
</span></span><span style=display:flex><span>Python 2.7.13 :: Continuum Analytics, Inc.</span></span></code></pre></td></tr></table></div></div></div><div class="not-prose w-full text-white py-1 px-2">> denotes input</div></div><p>Before installing additional modules, make sure your virtual environment is set to the newly created one. Here, this is shown by the <code>(python2)</code> in front of the command line input.</p><p>We also need PyQt in version 4 <code>conda install pyqt=4</code>, which will include of additional dependencies as well, including Qt. Finally, we need the Python extensions for Windows, <code>conda install pywin32</code>.</p><p>Now everything is set up, and you can run Anki by starting <code>anki.bat</code> from the command line (inside your environment).</p><h2 id=setting-up-a-project-folder>Setting up a project folder</h2><p>For my add-on, I&rsquo;ve set up the GitHub folder ready, to run Anki straight from the current directory. This way, one can easily fork the add-on, and create a new profile (for debugging purposes) in the same directory. For that, we will have the following structure:</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Text data-lang=Text><span style=display:flex><span>Anki_dev-Folder/
</span></span><span style=display:flex><span>    |
</span></span><span style=display:flex><span>    +-- addons/
</span></span><span style=display:flex><span>        |
</span></span><span style=display:flex><span>        +-- my_addon.py</span></span></code></pre></td></tr></table></div></div></div></div><p>In the file <code>my_addon.py</code>, I&rsquo;ve inserted the test code from <a href=https://apps.ankiweb.net/docs/addons.html>the documentation</a>}, which you can find below:</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">23
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#616e87;font-style:italic># import the main window object (mw) from aqt</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>from</span> <span style=color:#8fbcbb>aqt</span> <span style=color:#81a1c1;font-weight:700>import</span> mw
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># import the &#34;show info&#34; tool from utils.py</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>from</span> <span style=color:#8fbcbb>aqt.utils</span> <span style=color:#81a1c1;font-weight:700>import</span> showInfo
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># import all of the Qt GUI library</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>from</span> <span style=color:#8fbcbb>aqt.qt</span> <span style=color:#81a1c1;font-weight:700>import</span> <span style=color:#81a1c1>*</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># We&#39;re going to add a menu item below. First we want to create a function to</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># be called when the menu item is activated.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>def</span> <span style=color:#88c0d0>testFunction</span><span style=color:#eceff4>():</span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic># get the number of cards in the current collection, which is stored in</span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic># the main window</span>
</span></span><span style=display:flex><span>    cardCount <span style=color:#81a1c1>=</span> mw<span style=color:#81a1c1>.</span>col<span style=color:#81a1c1>.</span>cardCount<span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic># show a message box</span>
</span></span><span style=display:flex><span>    showInfo<span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;Card count: </span><span style=color:#a3be8c>%d</span><span style=color:#a3be8c>&#34;</span> <span style=color:#81a1c1>%</span> cardCount<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># create a new menu item, &#34;test&#34;</span>
</span></span><span style=display:flex><span>action <span style=color:#81a1c1>=</span> QAction<span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;test&#34;</span><span style=color:#eceff4>,</span> mw<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># set it to call testFunction when it&#39;s clicked</span>
</span></span><span style=display:flex><span>action<span style=color:#81a1c1>.</span>triggered<span style=color:#81a1c1>.</span>connect<span style=color:#eceff4>(</span>testFunction<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># and add it to the tools menu</span>
</span></span><span style=display:flex><span>mw<span style=color:#81a1c1>.</span>form<span style=color:#81a1c1>.</span>menuTools<span style=color:#81a1c1>.</span>addAction<span style=color:#eceff4>(</span>action<span style=color:#eceff4>)</span></span></span></code></pre></td></tr></table></div></div></div><div class="not-prose w-full text-white py-1 px-2">my_addon.py</div></div><p>Now you should end up with something like this in VSCode:</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki_addon_guide/initial_setup.png alt><p class="mt-2 text-base text-bluedark"></p></div><h2 id=configuring-the-run-action>Configuring the &ldquo;run&rdquo; action</h2><p>Hit <span class="font-sans bg-bluemedium px-2 py-1.5 border border-bluedark text-xs font-semibold rounded-md text-white whitespace-nowrap">F1</span> and enter &ldquo;launch&rdquo;, to create and edit the <code>launch.json</code> configuration file</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki_addon_guide/launch.png alt><p class="mt-2 text-base text-bluedark"></p></div><p>The now opened <code>.json</code> file is documented <a href=https://code.visualstudio.com/docs/python/debugging>here</a> and allows us, to specify the Python directory and command line arguments. We need to specify the options as below:</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">25
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JSON data-lang=JSON><span style=display:flex><span><span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic>// Use IntelliSense to learn about possible attributes.
</span></span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic></span>    <span style=color:#616e87;font-style:italic>// Hover to view descriptions of existing attributes.
</span></span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic></span>    <span style=color:#616e87;font-style:italic>// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
</span></span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic></span>    <span style=color:#81a1c1>&#34;version&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;0.2.0&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1>&#34;configurations&#34;</span><span style=color:#eceff4>:</span> <span style=color:#eceff4>[</span>
</span></span><span style=display:flex><span>        <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1>&#34;name&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;Python 2.7 Anki&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1>&#34;type&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;python&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1>&#34;request&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;launch&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1>&#34;stopOnEntry&#34;</span><span style=color:#eceff4>:</span> <span style=color:#81a1c1;font-weight:700>false</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1>&#34;pythonPath&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;C:/Anaconda3/envs/Python27/python&#34;</span><span style=color:#eceff4>,</span> <span style=color:#616e87;font-style:italic>// &lt;- Path to your python binary
</span></span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic></span>            <span style=color:#81a1c1>&#34;program&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;X:/.../anki-2.0.47/runanki&#34;</span><span style=color:#eceff4>,</span> <span style=color:#616e87;font-style:italic>// &lt;- Path to your runanki location
</span></span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic></span>            <span style=color:#81a1c1>&#34;cwd&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;${workspaceRoot}&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1>&#34;env&#34;</span><span style=color:#eceff4>:</span> <span style=color:#eceff4>{},</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1>&#34;envFile&#34;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#34;${workspaceRoot}/.env&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1>&#34;debugOptions&#34;</span><span style=color:#eceff4>:</span> <span style=color:#eceff4>[</span>
</span></span><span style=display:flex><span>                <span style=color:#a3be8c>&#34;RedirectOutput&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#eceff4>],</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1>&#34;args&#34;</span><span style=color:#eceff4>:</span> <span style=color:#eceff4>[</span>
</span></span><span style=display:flex><span>                <span style=color:#a3be8c>&#34;-b .&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#eceff4>]</span>
</span></span><span style=display:flex><span>        <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>]</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></td></tr></table></div></div></div><div class="not-prose w-full text-white py-1 px-2">launch.json</div></div><p>As you can see, you need to specify multiple values:</p><ul><li><code>pythonPath</code>: is pointed to the python binary. This will reside (with Anaconda/Conda) in your setup directory, in the subfolder &ldquo;envs&rdquo;</li><li><code>program</code>: points to the entry python file. This is actually the file that is invoked via <code>python runanki</code>, when you start anki via <code>runanki.bat</code></li><li><code>args</code>: We can specify a custom profile location via the <code>-b PATH</code> command. This way, Anki creates a new profile in the current directory (note the <code>.</code> as current folder). Also, since our code is already in the addons subfolder, it will run as soon as we start Anki.</li></ul><p>Hit <span class="font-sans bg-bluemedium px-2 py-1.5 border border-bluedark text-xs font-semibold rounded-md text-white whitespace-nowrap">F5</span> and debugging should start. You can also start debugging via the debugging pane on the left (under the &ldquo;No bug&rdquo; sign).</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki_addon_guide/initial_start.png alt><p class="mt-2 text-base text-bluedark"></p></div><p>Create a new profile, and open the &ldquo;tools&rdquo; menu. And there we have it: our &ldquo;test&rdquo; entry got created:</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki_addon_guide/test_menu.png alt><p class="mt-2 text-base text-bluedark"></p></div><h2 id=autocomplete>Autocomplete</h2><p>First, it would be nice to have auto-completion and code lookup working. We can enable this in the workspace settings:</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki_addon_guide/wssettings.png alt><p class="mt-2 text-base text-bluedark"></p></div><p>Search for &ldquo;autocomplete&rdquo;, click the pen symbol next to <code>"python.autoComplete.extraPaths"</code>, and again add the path to your Anki source location. Be careful to either escape backslashes or use forward slashes.</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki_addon_guide/ws_edited.png alt><p class="mt-2 text-base text-bluedark"></p></div><p>You are now able to use Intellisense to autocomplete names and functions. You can also go to the corresponding source for Anki files with <span class="font-sans bg-bluemedium px-2 py-1.5 border border-bluedark text-xs font-semibold rounded-md text-white whitespace-nowrap">Ctrl</span> and clicking a function name, and you can see annotations/docstrings if available.</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki_addon_guide/intellisense.png alt><p class="mt-2 text-base text-bluedark"></p></div><h2 id=linting>Linting</h2><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki_addon_guide/missing_import.png alt><p class="mt-2 text-base text-bluedark"></p></div><p>Now, you might note, that after saving, a lot of squiggly lines appear. This is because the <a href=https://en.wikipedia.org/wiki/Lint_(software)>linter</a> invoked by the VSCode extension doesn&rsquo;t know where the Anki source code is located. We can remedy this by creating the file <code>.pylintrc</code>, specifying where your Anki source code is located:</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>[Master]</span>
</span></span><span style=display:flex><span><span style=color:#8fbcbb>init-hook</span><span style=color:#81a1c1>=</span><span style=color:#a3be8c>&#39;import sys; sys.path.append(&#34;X:/.../anki-2.0.47/&#34;)&#39;</span></span></span></code></pre></td></tr></table></div></div></div><div class="not-prose w-full text-white py-1 px-2">.pylintrc</div></div><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki_addon_guide/pylint.png alt><p class="mt-2 text-base text-bluedark"></p></div><p>After editing and resaving your file, all the red squiggly lines will disappear.</p><p>If there are still errors in the linted file, this might due to VSCode using the wrong linter (i.e. a Python 3 linter instead of 2). We again can remedy this in the workspace file, by editing the workspace settings, and specifying the <code>python.pythonPath</code>. You need to give the fill path to the python executable, like we did in the <em>launch.json</em> file.</p><div class="flex flex-col not-prose p-2 md:p-4 xl:p-6 md:shadow-lg bg-bluemedium/10 border border-bluemedium/20 xl:max-w-[80%] mx-auto"><img src=/images/anki_addon_guide/selectingpython.png alt><p class="mt-2 text-base text-bluedark"></p></div><p>Sometimes VSCode is unable to install pylint. In that case, go to the command line, activate your environment (<code>>activate python2</code>) and run <code>>conda install pylint</code>. Now everything should lint fine. In my experience, pylint has some issues with pywin32 sometimes, but it should give you a general idea.</p><h2 id=gitignore>.gitignore</h2><p>Last but not least, it would be a good idea to exclude some stuff in a <code>.gitignore</code> file, in case you want to use version control. My file looks like this, to exclude VSCode settings, pylint settings, *.pyc files and the actual Anki profile that is generated:</p><div class="not-prose font-mono max-w-full text-sm bg-bluemedium border-2 border-bluemedium shadow-lg my-4 hover:border-orange hover:bg-orange transition"><div class="overflow-x-scroll py-1 bg-codebg"><div class=highlight><div style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6c6f74">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>*.db
</span></span><span style=display:flex><span>User 1/
</span></span><span style=display:flex><span>.vscode/
</span></span><span style=display:flex><span>.pylintrc
</span></span><span style=display:flex><span>*.pyc</span></span></code></pre></td></tr></table></div></div></div><div class="not-prose w-full text-white py-1 px-2">.gitignore</div></div><h2 id=final-remarks>Final remarks</h2><p>Now you&rsquo;ve got everything up and running. You have a full debugger at your hands, you can set breakpoints and inspect variables at run time. If you need starting help with the actual code, I encourage you to check out other plugins source code from listing on Anki Web. And if you are missing ideas for add-ons, there are often times simple request on the <a href=https://reddit.com/r/Anki>Anki Subreddit</a>.</p><p>Most initial steps might seem cumbersome, but once you know what you need to set up, you will redo these steps in no time!</p></div></div><div class="p-2 mt-4 mb-8 bg-white shadow-lg md:p-8"><div class="prose lg:prose-xl mb-2" id=content><h1>Comments</h1></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//http-chrisk91-me.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-30MHG4HNXJ"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-30MHG4HNXJ",{anonymize_ip:!1})}</script></body></html>